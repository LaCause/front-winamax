(function(){"use strict";const T={RANGE:"range",BOOLEAN:"boolean"},l={buyIn:"buyIn",triple:"triple"},_=async(t,a,r)=>{let i=0;const s=()=>{const e=t.slice(i,i+a);r(e),i+=a,i<t.length&&setTimeout(s,0)};s()},I=t=>t.split("&").map(r=>{const[i,s]=r.split("=");switch(i){case l.buyIn:return{code:l.buyIn,type:T.RANGE,value:{min:Number(s.split("-")[0]),max:Number(s.split("-")[1])}};default:return{code:l.triple,type:T.BOOLEAN,value:!0}}}),b=350;var o=(t=>(t.GRID="grid",t.LIST="list",t.TRIPLE="triple",t))(o||{});const O="worker-winamax-sny",A={LOAD_DATA:"LOAD_DATA",FILTER_DATA:"FILTER_DATA",CLEAR_DATA:"CLEAR_DATA",REFRESH_DATA:"REFRESH_DATA"},n={WORKER_INPUT:"WORKER_INPUT",WORKER_OUTPUT:"WORKER_OUTPUT"},y=self,L=async(t,a,r)=>{if(!t)return[];const i=t.filter(({buyIn:e})=>e>a&&e<r),s=[];return _(i,350,e=>{for(let c=0;c<e.length;c++)for(let R=c+1;R<e.length;R++)for(let p=R+1;p<e.length;p++){const[E,u,f]=[e[c],e[R],e[p]],N=Math.abs(E.startDate-u.startDate)>=36e5&&Math.abs(u.startDate-f.startDate)>=36e5,D=E.buyIn+u.buyIn+f.buyIn;N&&D>=a&&D<=r&&s.push([E,u,f])}}),s.slice(0,b)},U=async({data:t,queryFilter:a})=>{const r=I(a),i=r.find(e=>e.code===l.triple),s=r.find(e=>e.code===l.buyIn);return i&&s&&s.type===T.RANGE?await L(t,s.value.min,s.value.max):[]},d=[];y.onmessage=async t=>{if(typeof window<"u"&&t.data.key!=="worker-winamax-sny"){self.close();return}switch(t.data.state===n.WORKER_INPUT&&t.data.type===A.LOAD_DATA&&d.push(...t.data.data),t.data.state){case n.WORKER_INPUT:{let a=d,r=o.GRID;t.data.query&&(a=await U({data:a,queryFilter:t.data.query}),r=o.TRIPLE),y.postMessage({key:O,type:A.LOAD_DATA,state:n.WORKER_OUTPUT,listStructure:r,data:a,query:t.data.query});break}case n.WORKER_OUTPUT:{y.postMessage({key:O,listStructure:o.GRID,data:d,type:A.LOAD_DATA,state:n.WORKER_OUTPUT,query:t.data.query});break}}}})();
